<!DOCTYPE html>
<html><title>Advanced Configuration and Power Interface</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="bLmaFyyXugiCqSup-eIIIx0B4CngtdF_svyMMKQbS5E" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, minimum-scale=0.5, user-scalable=yes">
<meta name="apple-mobile-web-app-capable" content="yes" />
<script src="https://hypothes.is/embed.js" async></script>


<link rel="stylesheet" href="/braindump/css/main.min.56b43bcbc759a196f9dd525bee62bdec45a29ba95902bbab74a4f7ad2ea3e8cb.css"/>

<link rel="stylesheet" href="/braindump/css/links.min.4bf1990b213fb76d2a66153dc6ef9a57d49f536c6baf6e7f19a7948470a38141.css"/>

<link rel="stylesheet" href="/braindump/css/konubinix.min.cf2d0f36945178c647979ee68f1830892e06aa3d481d8913728b5c7462b97f6e.css"/>

<link rel="stylesheet" href="/ipfs/QmQFVQS89fv1XUNFcjwCKDePzckuT9kpuAVNYUwNdEfYcv/css/all.css"/>
<link rel="shortcut icon" href="/ipfs/QmVFwYV7YRZLKU3ybN1hW4jqfyZGPLKJwd8toN2wHz5UAD?a.png" type="image/x-icon" />

<body><header>
  <div>
	<a href="/braindump//"><h5 class="site-title">Konubinix&#39; opinionated web of thoughts</h5></a>
  </div>
  <span>
	<a href="/blog/"><i class="icon fas fa-blog"></i></a>
	<a href="/braindump/posts/"><i class="icon fas fa-brain"></i></a>
    <a href="mailto:konubinixweb@gmail.com"><i class="icon fas fa-envelope-square"></i></a>
    <a href="https://github.com/konubinix"><i class="icon fab fa-github-square"></i></a>
    <a href="https://linkedin.com/in/samuel-loury-61259040"><i class="icon fab fa-linkedin"></i></a>
	<a href="/braindump/graph.html"><i class="icon fas fa-project-diagram"></i></a>
	<a href="/braindump/index.xml"><i class="icon fas fa-rss-square"></i></a>
	<a href="/braindump/tags/"><i class="icon fa fa-tag"></i></a>
	<a href="/braindump/braindump_search"><i class="icon fa fa-search"></i></a>
  </span>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
		<p class="lead">
        <h1>Advanced Configuration and Power Interface</h1>
		<span class="badge badge-pill badge-warning"><a href="/braindump/tags/fleeting/">Fleeting</a></span></p>
        <ul>
<li>External reference: <a href="https://docs.kernel.org/firmware-guide/acpi/video_extension.html">https://docs.kernel.org/firmware-guide/acpi/video_extension.html</a></li>
<li>External reference: <a href="https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips">https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</a></li>
<li>External reference: <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></li>
</ul>
<p>ACPI - Wikipedia</p>
<blockquote>
<p>Advanced Configuration and Power Interface (ACPI) is an open standard that operating systems can use to discover and configure computer hardware components, to perform power management (e.g. putting unused hardware components to sleep), auto configuration (e.g. Plug and Play and hot swapping), and status monitoring.</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>defines hardware abstraction interfaces between the device&rsquo;s firmware (e.g. BIOS, UEFI), the computer hardware components, and the operating systems.[3</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>ACPI advertises the available components and their functions to the operating system kernel using instruction lists (&ldquo;methods&rdquo;) provided through the system firmware (UEFI or BIOS), which the kernel parses. ACPI then executes the desired operations written in ACPI Machine Language (such as the initialization of hardware components) using an embedded minimal virtual machine.</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>ACPI has three main components: the ACPI tables, the ACPI BIOS, and the ACPI registers</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>ACPI BIOS generates ACPI tables and loads ACPI tables into main memory</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>ACPI Machine Language (AML)</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>operating system must have an interpreter for the AML bytecode</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>BIOS development time, AML bytecode is compiled from the ASL (ACPI Source Language) code.[8][9]</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>November 2003, Linus Torvalds—author of the Linux kernel—described ACPI as &ldquo;a complete design disaster in every way</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>ACPI Component Architecture (ACPICA), mainly written by Intel&rsquo;s engineers, provides an open-source platform-independent reference implementation of the operating system–related ACPI code.[12</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>tables allow description of system hardware in a platform-independent manner, and are presented as either fixed-formatted data structures or in AML</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/ACPI">https://en.wikipedia.org/wiki/ACPI</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>many varieties of ACPI tables, but they break into two main categories - configuration data and ACPI Machine Language (AML) byte code.</p>
<p>&mdash; <a href="https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips">https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>driver is responsible for locating and extracting data from the ACPI tables and interpreting it in a way that conforms to the specification</p>
<p>&mdash; <a href="https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips">https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>ACPI is a heavily overly engineered solution, however it is powerful because it provides an abstract view of how to control machine specific hardware to any operating system</p>
<p>&mdash; <a href="https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips">https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>major downside is that most firmware vendors engineer ACPI to match with a very Microsoft centric implementation of ACPI which at times is a little lax in some areas and does not fully conform to the ACPI specification</p>
<p>&mdash; <a href="https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips">https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>example, to be able to query the current backlight brightness level, the vendor writes an AML method called _BQC (Backlight Query Current) which returns the level.</p>
<p>&mdash; <a href="https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips">https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>method could be implemented in many different ways, for example, just reading a value from the Embedded Controller&rsquo;s memory, or maybe it jumps into the BIOS to fetch information using a System Management Mode service</p>
<p>&mdash; <a href="https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips">https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>kernel has no idea of how the method is implemented - it just executes the AML byte code which has full access to I/O regions and memory to allow it to interact with the hardware.</p>
<p>&mdash; <a href="https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips">https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>Timing issues - e.g. interacting with the Embedded Controller, mis-timed read/writes. AML may execute correctly in Windows but not in Linux because of the different speed AML operations are being executed in different host operating systems</p>
<p>&mdash; <a href="https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips">https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>If the ACPI table has a video device, and acpi_backlight=vendor kernel
command line is not present, the driver will register a backlight device
and set the required backlight operation structure for it for the sysfs
interface control. For every registered class device, there will be a
directory named acpi_videoX under /sys/class/backlight</p>
<p>&mdash; <a href="https://docs.kernel.org/firmware-guide/acpi/video_extension.html">https://docs.kernel.org/firmware-guide/acpi/video_extension.html</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>what ACPI video driver does is:</p>
<p>actual_brightness:on read, control method _BQC will be evaluated to
get the brightness level the firmware thinks it is at;</p>
<p>bl_power:not implemented, will set the current brightness instead;</p>
<p>brightness:on write, control method _BCM will run to set the requested brightness level;</p>
<p>max_brightness:Derived from the _BCL package(see below);</p>
<p>type:firmware</p>
<p>&mdash; <a href="https://docs.kernel.org/firmware-guide/acpi/video_extension.html">https://docs.kernel.org/firmware-guide/acpi/video_extension.html</a></p>
</blockquote>
<h2 id="07acc3cf-6e26-4a90-8d31-9395bdc9e3ff">ACPI Component Architecture</h2>
<ul>
<li>External reference: <a href="https://www.intel.com/content/www/us/en/developer/topic-technology/open/acpica/overview.html">https://www.intel.com/content/www/us/en/developer/topic-technology/open/acpica/overview.html</a></li>
</ul>
<p>Overview of ACPI Component Architecture</p>
<blockquote>
<p>ACPI Component Architecture (ACPICA) is a reference implementation of the Advanced Configuration and Power Interface (ACPI) specification. This implementation simplifies complex ACPI operating system implementations by integrating it directly as a kernel-resident subsystem, without changes to the core ACPICA code.</p>
<p>&mdash; <a href="https://www.intel.com/content/www/us/en/developer/topic-technology/open/acpica/overview.html">https://www.intel.com/content/www/us/en/developer/topic-technology/open/acpica/overview.html</a></p>
</blockquote>
<h2 id="726ac66d-101f-4b2e-a05a-273107052c27">Differentiated System Description Table</h2>
<ul>
<li>External reference: <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></li>
</ul>
<p>DSDT - ArchWiki</p>
<blockquote>
<p>DSDT (Differentiated System Description Table) is</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>supplies information about supported power events in a given system.</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>common Linux problem is missing ACPI functionality, such as: fans not running, screens not turning off when the lid is closed, etc.</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>can stem from DSDTs made with Windows specifically in mind, which can be patched after installation</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>Basically a DSDT table is the code run on ACPI (Power Management) events</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>possible that the hardware manufacturer has released an updated firmware which fixes ACPI related problems.  Installing an updated firmware is often preferred over this method because it would avoid duplication of effort.</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>Even before attempting to fix your DSDT yourself, you can attempt a couple of different shortcuts:</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>Tell the kernel to report a version of Windows</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>other strings to test:</p>
<p>&ldquo;Microsoft Windows XP&rdquo;
&ldquo;Microsoft Windows 2000&rdquo;
&ldquo;Microsoft Windows 2000.1&rdquo;
&ldquo;Microsoft Windows ME: Millennium Edition&rdquo;
&ldquo;Windows 2001&rdquo;
&ldquo;Windows 2006&rdquo;
&ldquo;Windows 2009&rdquo;
&ldquo;Windows 2012&rdquo;
when all that fails, you can even try &ldquo;Linux&rdquo;</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>DSDT file is originally written in ACPI Source language (an .asl/.dsl file). Using a compiler this can produce an &lsquo;ACPI Machine Language&rsquo; file (.aml) or a hex table (.hex).</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>What compiled the original code?
Check if your system&rsquo;s DSDT was compiled using Intel or Microsoft compiler:</p>
<p>ACPI: DSDT 00000000bf7e5000 0A35F (v02 Intel  CALPELLA 06040000 INTL 20060912)
ACPI: EC: Look up EC in DSDT</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>case Microsoft&rsquo;s compiler had been used, abbreviation INTL would instead be MSFT</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>ACPICA component of the kernel can handle most of the trivial errors you get while compiling the DSDT. So do not fret yourself over compile errors if your system is working the way it should.</p>
<p>&mdash; <a href="https://wiki.archlinux.org/title/DSDT">https://wiki.archlinux.org/title/DSDT</a></p>
</blockquote>
<h2 id="permalink"><a href="https://konubinix.eu/braindump/c7a06263-dba4-4d99-a984-ab46cb0b5188?title=advanced_configuration_and_power_interface">Permalink</a></h2>
      </div>
	  <aside class="date"><time>Last updated: 05 Feb 2024</time></aside>
	  <aside class="date"><time>Published&nbsp;&nbsp;&nbsp;: 02 Feb 2024</time></aside>
    </div>
  </div>
</div>

<script src="/braindump/js/URI.js" type="text/javascript"></script>

<script src="/braindump/js/page.js" type="text/javascript"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
