<!DOCTYPE html>
<html><title>setup Ubuntu with vagrant</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="bLmaFyyXugiCqSup-eIIIx0B4CngtdF_svyMMKQbS5E" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, minimum-scale=0.5, user-scalable=yes">
<meta name="apple-mobile-web-app-capable" content="yes" />
<script src="https://hypothes.is/embed.js" async></script>


<link rel="stylesheet" href="/braindump/css/main.min.56b43bcbc759a196f9dd525bee62bdec45a29ba95902bbab74a4f7ad2ea3e8cb.css"/>

<link rel="stylesheet" href="/braindump/css/links.min.4bf1990b213fb76d2a66153dc6ef9a57d49f536c6baf6e7f19a7948470a38141.css"/>

<link rel="stylesheet" href="/braindump/css/konubinix.min.cf2d0f36945178c647979ee68f1830892e06aa3d481d8913728b5c7462b97f6e.css"/>

<link rel="stylesheet" href="/ipfs/QmQFVQS89fv1XUNFcjwCKDePzckuT9kpuAVNYUwNdEfYcv/css/all.css"/>
<link rel="shortcut icon" href="/ipfs/QmVFwYV7YRZLKU3ybN1hW4jqfyZGPLKJwd8toN2wHz5UAD?a.png" type="image/x-icon" />

<body><header>
  <div>
	<a href="/braindump//"><h5 class="site-title">Konubinix&#39; opinionated web of thoughts</h5></a>
  </div>
  <span>
	<a href="/blog/"><i class="icon fas fa-blog"></i></a>
	<a href="/braindump/posts/"><i class="icon fas fa-brain"></i></a>
    <a href="mailto:konubinixweb@gmail.com"><i class="icon fas fa-envelope-square"></i></a>
    <a href="https://github.com/konubinix"><i class="icon fab fa-github-square"></i></a>
    <a href="https://linkedin.com/in/samuel-loury-61259040"><i class="icon fab fa-linkedin"></i></a>
	<a href="/braindump/graph.html"><i class="icon fas fa-project-diagram"></i></a>
	<a href="/braindump/index.xml"><i class="icon fas fa-rss-square"></i></a>
	<a href="/braindump/tags/"><i class="icon fa fa-tag"></i></a>
	<a href="/braindump/braindump_search"><i class="icon fa fa-search"></i></a>
  </span>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
		<p class="lead">
        <h1>Setup Ubuntu With Vagrant</h1>
		<span class="badge badge-pill badge-warning"><a href="/braindump/tags/fleeting/">Fleeting</a></span></p>
        <p>Setup Ubuntu with <a href="/braindump/posts/vagrant/">vagrant</a>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#0086b3">cd</span> ~/test
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span> ! <span style="color:#000;font-weight:bold">[</span> -e <span style="color:#d14">&#34;ubuntu2004&#34;</span> <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    mkdir ubuntu2004
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#0086b3">cd</span> ubuntu2004
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>vagrant init generic/ubuntu2004
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>[0mA `Vagrantfile` has been placed in this directory. You are now
</span></span><span style="display:flex;"><span>ready to `vagrant up` your first virtual environment! Please read
</span></span><span style="display:flex;"><span>the comments in the Vagrantfile as well as documentation on
</span></span><span style="display:flex;"><span>`vagrantup.com` for more information on using Vagrant.[0m
</span></span></code></pre></div><p>Then</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>vagrant up
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>[0mBringing machine &#39;default&#39; up with &#39;libvirt&#39; provider...[0m
</span></span><span style="display:flex;"><span>[0;31mError while connecting to Libvirt: Error making a connection to libvirt URI qemu:///system?no_verify=1&amp;keyfile=/home/sam/.ssh/id_rsa:
</span></span><span style="display:flex;"><span>Call to virConnectOpen failed: Failed to connect socket to &#39;/var/run/libvirt/libvirt-sock&#39;: No such file or directory[0m
</span></span></code></pre></div><p>Hmm, what now?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>apt info libvirt-daemon
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Package: libvirt-daemon
</span></span><span style="display:flex;"><span>Version: 6.9.0-1+b2
</span></span><span style="display:flex;"><span>Priority: optional
</span></span><span style="display:flex;"><span>Section: admin
</span></span><span style="display:flex;"><span>Source: libvirt (6.9.0-1)
</span></span><span style="display:flex;"><span>Installed-Size: 1846 kB
</span></span><span style="display:flex;"><span>= 2.17.2), libc6 (&gt;= 2.28), libcap-ng0 (&gt;= 0.7.9), libdevmapper1.02.1 (&gt;= 2:1.02.97), libfuse2 (&gt;= 2.8), libgcc-s1 (&gt;= 3.3.1), libglib2.0-0 (&gt;= 2.31.8), libnetcf1 (&gt;= 1:0.2.2), libparted2 (&gt;= 3.1), libpcap0.8 (&gt;= 1.5.1), libpciaccess0, libselinux1 (&gt;= 3.1~), libudev1 (&gt;= 183), libxml2 (&gt;= 2.9.2+really2.9.1+dfsg1-0.2)
</span></span><span style="display:flex;"><span>= 0.9.1)
</span></span><span style="display:flex;"><span>Suggests: libvirt-daemon-driver-storage-gluster, libvirt-daemon-driver-storage-rbd, libvirt-daemon-driver-storage-zfs, libvirt-daemon-system, numad
</span></span><span style="display:flex;"><span>Enhances: qemu, qemu-kvm, xen
</span></span><span style="display:flex;"><span>Homepage: https://libvirt.org/
</span></span><span style="display:flex;"><span>Download-Size: 501 kB
</span></span><span style="display:flex;"><span>APT-Sources: http://deb.debian.org/debian testing/main amd64 Packages
</span></span><span style="display:flex;"><span>Description: Virtualization daemon
</span></span><span style="display:flex;"><span> Libvirt is a C toolkit to interact with the virtualization capabilities
</span></span><span style="display:flex;"><span> of recent versions of Linux (and other OSes). The library aims at providing
</span></span><span style="display:flex;"><span> a long term stable C API for different virtualization mechanisms. It currently
</span></span><span style="display:flex;"><span> supports QEMU, KVM, XEN, OpenVZ, LXC, and VirtualBox.
</span></span><span style="display:flex;"><span> .
</span></span><span style="display:flex;"><span> This package contains the daemon libvirtd to manage the hypervisors.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[33mN: [0mThere is 1 additional record. Please use the &#39;-a&#39; switch to see it[0m
</span></span></code></pre></div><p>Ok, let&rsquo;s install this, as well as <code>libvirt-daemon-driver-vbox libvirt-daemon-system libvirt-daemon-system-systemd</code>.</p>
<p>Great, libvirt is running. Now let&rsquo;s try again</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>vagrant up
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>[0mBringing machine &#39;default&#39; up with &#39;libvirt&#39; provider...[0m
</span></span><span style="display:flex;"><span>[0;31mError while connecting to Libvirt: Error making a connection to libvirt URI qemu:///system?no_verify=1&amp;keyfile=/home/sam/.ssh/id_rsa:
</span></span><span style="display:flex;"><span>Call to virConnectOpen failed: authentication unavailable: no polkit agent available to authenticate action &#39;org.libvirt.unix.manage&#39;[0m
</span></span></code></pre></div><p>You must be kidding me&hellip;</p>
<p>It looks like it could add my user to the virt group, as said in <a href="/braindump/posts/polkit_password_less_access_for_the_libvirt_group_cole_robinson/">here</a>.</p>
<p>Next try, and the virtual machine is running.</p>
<!--more-->
<h2 id="notes-linking-here">Notes linking here</h2>
<ul>
<li><a href="/braindump/posts/install_the_linux_sgx_driver/">install the linux sgx driver</a></li>
</ul>
<h2 id="permalink"><a href="https://konubinix.eu/braindump/118423a4-7c99-4323-b681-24cd4e316c9d?title=setup_ubuntu_with_vagrant">Permalink</a></h2>
      </div>
	  <aside class="date"><time>Last updated: 09 Aug 2021</time></aside>
	  <aside class="date"><time>Published&nbsp;&nbsp;&nbsp;: 22 Dec 2020</time></aside>
    </div>
  </div>
</div>

<script src="/braindump/js/URI.js" type="text/javascript"></script>

<script src="/braindump/js/page.js" type="text/javascript"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
