<!DOCTYPE html>
<html><title>rpyc</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="bLmaFyyXugiCqSup-eIIIx0B4CngtdF_svyMMKQbS5E" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, minimum-scale=0.5, user-scalable=yes">
<meta name="apple-mobile-web-app-capable" content="yes" />
<script src="https://hypothes.is/embed.js" async></script>


<link rel="stylesheet" href="/braindump/css/main.min.56b43bcbc759a196f9dd525bee62bdec45a29ba95902bbab74a4f7ad2ea3e8cb.css"/>

<link rel="stylesheet" href="/braindump/css/links.min.4bf1990b213fb76d2a66153dc6ef9a57d49f536c6baf6e7f19a7948470a38141.css"/>

<link rel="stylesheet" href="/braindump/css/konubinix.min.cf2d0f36945178c647979ee68f1830892e06aa3d481d8913728b5c7462b97f6e.css"/>

<link rel="stylesheet" href="/ipfs/QmQFVQS89fv1XUNFcjwCKDePzckuT9kpuAVNYUwNdEfYcv/css/all.css"/>
<link rel="shortcut icon" href="/ipfs/QmVFwYV7YRZLKU3ybN1hW4jqfyZGPLKJwd8toN2wHz5UAD?a.png" type="image/x-icon" />

<body><header>
  <div>
	<a href="/braindump//"><h5 class="site-title">Konubinix&#39; opinionated web of thoughts</h5></a>
  </div>
  <span>
	<a href="/blog/"><i class="icon fas fa-blog"></i></a>
	<a href="/braindump/posts/"><i class="icon fas fa-brain"></i></a>
    <a href="mailto:konubinixweb@gmail.com"><i class="icon fas fa-envelope-square"></i></a>
    <a href="https://github.com/konubinix"><i class="icon fab fa-github-square"></i></a>
    <a href="https://linkedin.com/in/samuel-loury-61259040"><i class="icon fab fa-linkedin"></i></a>
	<a href="/braindump/graph.html"><i class="icon fas fa-project-diagram"></i></a>
	<a href="/braindump/index.xml"><i class="icon fas fa-rss-square"></i></a>
	<a href="/braindump/tags/"><i class="icon fa fa-tag"></i></a>
	<a href="/braindump/braindump_search"><i class="icon fa fa-search"></i></a>
  </span>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
		<p class="lead">
        <h1>Rpyc</h1>
		<span class="badge badge-pill badge-warning"><a href="/braindump/tags/fleeting/">Fleeting</a></span></p>
        <p><a id="code-snippet--serve-ex"></a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>import os
</span></span><span style="display:flex;"><span>os.a = (locals(), globals())
</span></span><span style="display:flex;"><span>os.environ[&#34;NO_COLOR&#34;] = &#34;1&#34;
</span></span><span style="display:flex;"><span>from rpyc.cli.rpyc_classic import ClassicServer
</span></span><span style="display:flex;"><span>ClassicServer.run(argv=[&#34;dummy&#34;, &#34;--port=9999&#34;, &#34;--host=0.0.0.0&#34;])
</span></span></code></pre></div><p><a id="code-snippet--serve"></a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">import</span> <span style="color:#555">os</span>
</span></span><span style="display:flex;"><span>os<span style="color:#000;font-weight:bold">.</span>a <span style="color:#000;font-weight:bold">=</span> (<span style="color:#0086b3">locals</span>(), <span style="color:#0086b3">globals</span>())
</span></span><span style="display:flex;"><span>os<span style="color:#000;font-weight:bold">.</span>environ[<span style="color:#d14">&#34;NO_COLOR&#34;</span>] <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">from</span> <span style="color:#555">rpyc.cli.rpyc_classic</span> <span style="color:#000;font-weight:bold">import</span> ClassicServer
</span></span><span style="display:flex;"><span>ClassicServer<span style="color:#000;font-weight:bold">.</span>run(argv<span style="color:#000;font-weight:bold">=</span>[<span style="color:#d14">&#34;dummy&#34;</span>, <span style="color:#d14">&#34;--port=9999&#34;</span>, <span style="color:#d14">&#34;--host=0.0.0.0&#34;</span>])
</span></span></code></pre></div><p>Or, using using a python2 stack</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">import</span> <span style="color:#555">os</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">from</span> <span style="color:#555">rpyc.core</span> <span style="color:#000;font-weight:bold">import</span> SlaveService
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">from</span> <span style="color:#555">rpyc.utils.server</span> <span style="color:#000;font-weight:bold">import</span> ForkingServer
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">run</span>(<span style="color:#000;font-weight:bold">*</span>args, <span style="color:#000;font-weight:bold">**</span>kwargs):
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">print</span>(<span style="color:#d14">&#34;Starting rpyc&#34;</span>)
</span></span><span style="display:flex;"><span>    os<span style="color:#000;font-weight:bold">.</span>a <span style="color:#000;font-weight:bold">=</span> (<span style="color:#0086b3">locals</span>(), <span style="color:#0086b3">globals</span>(), args, kwargs)
</span></span><span style="display:flex;"><span>    os<span style="color:#000;font-weight:bold">.</span>environ[<span style="color:#d14">&#34;NO_COLOR&#34;</span>] <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>    ForkingServer(
</span></span><span style="display:flex;"><span>        SlaveService,
</span></span><span style="display:flex;"><span>        hostname<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;0.0.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>        port<span style="color:#000;font-weight:bold">=</span><span style="color:#099">9999</span>,
</span></span><span style="display:flex;"><span>        reuse_addr<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">True</span>,
</span></span><span style="display:flex;"><span>    )<span style="color:#000;font-weight:bold">.</span>start()
</span></span></code></pre></div><p>In that case, you will need to setup the python2 env, which is not that practical.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python2 -m ensurepip --user
</span></span><span style="display:flex;"><span>python2 -m pip install --user virtualenv
</span></span><span style="display:flex;"><span>python2 -m virtualenv venv
</span></span><span style="display:flex;"><span><span style="color:#0086b3">source</span> ./venv/bin/activate
</span></span><span style="display:flex;"><span>python -m pip install <span style="color:#008080">rpyc</span><span style="color:#000;font-weight:bold">==</span>3.4.4 ipython
</span></span></code></pre></div><p>I also realize that directly using c.modules fails sometimes, but providing a
wrapper around the module works.</p>
<p>For instance,</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">import</span> <span style="color:#555">rpyc</span>;c <span style="color:#000;font-weight:bold">=</span> rpyc<span style="color:#000;font-weight:bold">.</span>classic<span style="color:#000;font-weight:bold">.</span>connect(<span style="color:#d14">&#34;192.168.1.196&#34;</span>, <span style="color:#099">9999</span>)
</span></span><span style="display:flex;"><span>c<span style="color:#000;font-weight:bold">.</span>modules<span style="color:#000;font-weight:bold">.</span>plyer<span style="color:#000;font-weight:bold">.</span>flash<span style="color:#000;font-weight:bold">.</span>on()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>========= Remote Traceback (1) =========
</span></span><span style="display:flex;"><span>Traceback (most recent call last):
</span></span><span style="display:flex;"><span>  File &#34;/home/test/project/.buildozer/android/platform/build/dists/poc/private/lib/python2.7/site-packages/rpyc/core/protocol.py&#34;, line 347, in _dispatch_request
</span></span><span style="display:flex;"><span>  File &#34;/home/test/project/.buildozer/android/platform/build/dists/poc/private/lib/python2.7/site-packages/rpyc/core/protocol.py&#34;, line 624, in _handle_call
</span></span><span style="display:flex;"><span>  File &#34;/home/test/project/.buildozer/android/platform/build/dists/poc/private/lib/python2.7/site-packages/plyer/facades/flash.py&#34;, line 50, in on
</span></span><span style="display:flex;"><span>  File &#34;/home/test/project/.buildozer/android/platform/build/dists/poc/private/lib/python2.7/site-packages/plyer/facades/flash.py&#34;, line 71, in _on
</span></span><span style="display:flex;"><span>NotImplementedError
</span></span></code></pre></div><p>But, as soon as it was used once in the apk, then it becomes available.</p>
<p>But generally, it is not very practical.</p>
<h2 id="notes-linking-here">Notes linking here</h2>
<ul>
<li><a href="https://konubinix.eu/blog/posts/a_python_runtime_on_android/?title=a_legacy_from_another_lifetime#a-legacy-from-another-lifetime">a legacy from another lifetime</a> (blog)</li>
<li><a href="https://konubinix.eu/blog/posts/a_python_runtime_on_android/?title=a_python_runtime_on_android#">a python runtime on android</a> (blog)</li>
</ul>
<h2 id="permalink"><a href="https://konubinix.eu/braindump/bc88d024-8a44-4111-b5e2-bcb545d4813b?title=rpyc">Permalink</a></h2>
      </div>
	  <aside class="date"><time>Last updated: 20 May 2025</time></aside>
	  <aside class="date"><time>Published&nbsp;&nbsp;&nbsp;: 08 Jan 2024</time></aside>
    </div>
  </div>
</div>

<script src="/braindump/js/URI.js" type="text/javascript"></script>

<script src="/braindump/js/page.js" type="text/javascript"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
