<!DOCTYPE html>
<html><title>JWT Access Tokens profile for OAuth 2.0</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="bLmaFyyXugiCqSup-eIIIx0B4CngtdF_svyMMKQbS5E" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, minimum-scale=0.5, user-scalable=yes">
<meta name="apple-mobile-web-app-capable" content="yes" />
<script src="https://hypothes.is/embed.js" async></script>


<link rel="stylesheet" href="/braindump/css/main.min.56b43bcbc759a196f9dd525bee62bdec45a29ba95902bbab74a4f7ad2ea3e8cb.css"/>

<link rel="stylesheet" href="/braindump/css/links.min.4bf1990b213fb76d2a66153dc6ef9a57d49f536c6baf6e7f19a7948470a38141.css"/>

<link rel="stylesheet" href="/braindump/css/konubinix.min.cf2d0f36945178c647979ee68f1830892e06aa3d481d8913728b5c7462b97f6e.css"/>

<link rel="stylesheet" href="/ipfs/QmQFVQS89fv1XUNFcjwCKDePzckuT9kpuAVNYUwNdEfYcv/css/all.css"/>
<link rel="shortcut icon" href="/ipfs/QmVFwYV7YRZLKU3ybN1hW4jqfyZGPLKJwd8toN2wHz5UAD?a.png" type="image/x-icon" />

<body><header>
  <div>
	<a href="/braindump//"><h5 class="site-title">Konubinix&#39; opinionated web of thoughts</h5></a>
  </div>
  <span>
	<a href="/blog/"><i class="icon fas fa-blog"></i></a>
	<a href="/braindump/posts/"><i class="icon fas fa-brain"></i></a>
    <a href="mailto:konubinixweb@gmail.com"><i class="icon fas fa-envelope-square"></i></a>
    <a href="https://github.com/konubinix"><i class="icon fab fa-github-square"></i></a>
    <a href="https://linkedin.com/in/samuel-loury-61259040"><i class="icon fab fa-linkedin"></i></a>
	<a href="/braindump/graph.html"><i class="icon fas fa-project-diagram"></i></a>
	<a href="/braindump/index.xml"><i class="icon fas fa-rss-square"></i></a>
	<a href="/braindump/tags/"><i class="icon fa fa-tag"></i></a>
	<a href="/braindump/braindump_search"><i class="icon fa fa-search"></i></a>
  </span>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
		<p class="lead">
        <h1>JWT Access Tokens Profile for OAuth 2.0</h1>
		<span class="badge badge-pill badge-warning"><a href="/braindump/tags/fleeting/">Fleeting</a></span></p>
        <ul>
<li>External reference: <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></li>
<li>External reference: <a href="https://oauth.net/2/jwt-access-tokens/">https://oauth.net/2/jwt-access-tokens/</a></li>
</ul>
<p><a href="/braindump/posts/json_web_tokens/">JWT</a> <a href="/braindump/posts/oauth_2_0/#26052c2d-ac4a-4637-9122-704d51585dc8">Access Tokens</a> for <a href="/braindump/posts/oauth_2_0/">OAuth 2.0</a></p>
<blockquote>
<p>Below is an example JSON object that could be encoded to produce the
JWT Claims Set for a JWT:</p>
<p>{&ldquo;iss&rdquo;:&quot;<a href="https://jwt-idp.example.com">https://jwt-idp.example.com</a>&quot;,
&ldquo;sub&rdquo;:&quot;<a href="mailto:mike@example.com">mailto:mike@example.com</a>&quot;,
&ldquo;aud&rdquo;:&quot;<a href="https://jwt-rp.example.net">https://jwt-rp.example.net</a>&quot;,
&ldquo;nbf&rdquo;:1300815780,
&ldquo;exp&rdquo;:1300819380,
&ldquo;<a href="http://claims.example.com/member%22:true">http://claims.example.com/member%22:true</a>}</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7523">https://datatracker.ietf.org/doc/html/rfc7523</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>the claims not established herein but used in examples and descriptions, such as
iss, sub, exp, etc., are defined by [JWT].</p>
<p>[&hellip;]</p>
<ul>
<li>&ldquo;act&rdquo; (Actor) Claim</li>
<li>&ldquo;scope&rdquo; (Scopes) Claim</li>
<li>&ldquo;client_id&rdquo; (Client Identifier) Claim</li>
<li>&ldquo;may_act&rdquo; (Authorized Actor) Claim</li>
</ul>
<p>&mdash; <a href="https://www.rfc-editor.org/rfc/rfc8693">https://www.rfc-editor.org/rfc/rfc8693</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>The JWT Access Token profile describes a way to encode access tokens as a JSON
Web Token, including a set of standard claims that are useful in an access token</p>
<p>&mdash; <a href="https://oauth.net/2/jwt-access-tokens/">https://oauth.net/2/jwt-access-tokens/</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>often include resource owner attributes directly in access tokens so that
resource servers can consume them directly for authorization or other purposes
without any further round trips to introspection</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p><a href="/braindump/posts/json_web_tokens/">JWTs</a> can be used as OAuth 2.0 <a href="/braindump/posts/oauth_2_0/#5d9fcc89-c31e-43ed-a53f-b548eb688999">Bearer Tokens</a> to encode all relevant parts of an
access token into the access token itself instead of having to store them in a
database</p>
<p>&mdash; <a href="https://oauth.net/2/jwt-access-tokens/">https://oauth.net/2/jwt-access-tokens/</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>This specification defines a profile for issuing OAuth 2.0 access tokens in JSON Web Token (JWT) format.</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>Authorization servers and resource servers from different vendors can leverage
this profile to issue and consume access tokens in an interoperable manner</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>original OAuth 2.0 Authorization Framework specification <a href="/braindump/posts/oauth_2_0/#5d9fcc89-c31e-43ed-a53f-b548eb688999">does not mandate any
specific format for access tokens</a></p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>in-market use has shown that many commercial OAuth 2.0 implementations elected
to issue access tokens using a format that can be parsed and validated by
resource servers directly, without further authorization server involvement</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>At the time of writing,
many commercial implementations leverage the JSON Web Token (JWT)</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>authorization servers will often include resource owner attributes directly in
access tokens so that resource servers can consume them directly for
authorization or other purposes without any further round trips to introspection
or UserInfo endpoints</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>This profile does not introduce any mechanism for a client to directly request
the presence of specific claims in JWT access tokens, as the authorization
server can determine what additional claims are required by a particular
resource server by taking the client_id of the client and the &ldquo;scope&rdquo; and the
&ldquo;resource&rdquo; parameters included in the request into consideration.</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>Many authorization servers embed authorization attributes that go beyond the
delegated scenarios described by [<a href="/braindump/posts/json_web_tokens/">RFC7519</a>] in the <a href="/braindump/posts/oauth_2_0/#26052c2d-ac4a-4637-9122-704d51585dc8">access tokens</a> they issue.</p>
<p>Typical examples include resource owner memberships in <a href="/braindump/posts/resource_based_access_control/">roles and groups that are
relevant to the resource being accessed</a>, entitlements assigned to the resource
owner for the targeted resource that the authorization server knows about, and
so on.</p>
<p>An authorization server wanting to include such attributes in a JWT access token
SHOULD use the &ldquo;groups&rdquo;, &ldquo;roles&rdquo;, and &ldquo;entitlements&rdquo; attributes of the &ldquo;User&rdquo;
resource schema defined by Section 4.1.2 of [RFC7643]) as claim types.</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p><a href="/braindump/posts/oauth_2_0/#ead7dfac-e39a-4262-8066-a9e594d1b8a3">Authorization servers</a> SHOULD use OAuth 2.0 Authorization Server
Metadata [<a href="/braindump/posts/oauth_2_0_authorization_server_metadata/">RFC8414</a>] to advertise to resource servers their signing
keys via &ldquo;<a href="/braindump/posts/jwks_uri/">jwks_uri</a>&rdquo; and what &ldquo;iss&rdquo; claim value to expect via the
&ldquo;issuer&rdquo; metadata value.</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<h2 id="e015eb2b-1ed5-4b4a-b403-b2d2f173899b">link with <a href="/braindump/posts/audience_claim/">audience claim</a></h2>
<blockquote>
<p>If the request includes a &ldquo;resource&rdquo; parameter (as defined in
[RFC8707]), the resulting JWT access token &ldquo;aud&rdquo; claim SHOULD have the same value as the &ldquo;resource&rdquo; parameter in the request.</p>
<p>[&hellip;]</p>
<p>If the request does not include a &ldquo;resource&rdquo; parameter, the authorization server MUST use a default resource indicator in the &ldquo;aud&rdquo; claim.</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<h2 id="652c9141-92cd-4087-88bc-6237c16983d5">link with <a href="/braindump/posts/oauth_2_0_authorization_server_metadata/">well-known/oauth-authorization-server</a> and <a href="/braindump/posts/openid_connect_discovery/">well-known/openid-configuration</a></h2>
<blockquote>
<p>Authorization servers SHOULD use OAuth 2.0 Authorization Server Metadata
[RFC8414] to advertise to resource servers their signing keys via &ldquo;jwks_uri&rdquo; and
what &ldquo;iss&rdquo; claim value to expect via the &ldquo;issuer&rdquo; metadata value. Alternatively,
authorization servers implementing OpenID Connect MAY use the OpenID Connect
discovery [OpenID.Discovery] document for the same purpose</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>If an authorization server supports both OAuth 2.0 Authorization Server Metadata
and OpenID Connect discovery, the values provided MUST be consistent across the
two publication</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc9068">https://datatracker.ietf.org/doc/html/rfc9068</a></p>
</blockquote>
<!--more-->
<h2 id="notes-linking-here">Notes linking here</h2>
<ul>
<li><a href="/braindump/posts/is_the_bearer_token_opaque/">is the bearer token opaque?</a></li>
<li><a href="/braindump/posts/protect_your_apis_with_oauth/#091fa3a1-34d1-41fd-a955-bda0e8924acc">JWT Access Tokens profile for OAuth 2.0 may be different from implementations</a></li>
<li><a href="/braindump/posts/trying_authenticating_to_keycloak_using_google_as_identity_provider/#5f45750e-4fe9-4b4c-a141-e8a2ccd2b2af">keycloak provide many user related information in the access token by default.</a></li>
<li><a href="/braindump/posts/making_sense_of_github_oidc_flow/">making sense of github OIDC flow</a></li>
<li><a href="/braindump/posts/oauth_what_s_the_meaning_of_the_gty_claim_in_a_jwt_token/">oauth - what&rsquo;s the meaning of the “gty” claim in a jwt token?</a></li>
<li><a href="/braindump/posts/oauth_2_0/">OAuth 2.0</a></li>
<li><a href="/braindump/posts/oauth_2_0/#f86ccef1-e4b1-413f-b78c-8070f4dceafa">oauth 2.0 client</a></li>
</ul>
<h2 id="permalink"><a href="https://konubinix.eu/braindump/29321a10-b2e8-442a-8f06-1207166a4ea4?title=jwt_access_tokens_profile_for_oauth_2_0">Permalink</a></h2>
      </div>
	  <aside class="date"><time>Last updated: 20 Dec 2024</time></aside>
	  <aside class="date"><time>Published&nbsp;&nbsp;&nbsp;: 02 Jan 2022</time></aside>
    </div>
  </div>
</div>

<script src="/braindump/js/URI.js" type="text/javascript"></script>

<script src="/braindump/js/page.js" type="text/javascript"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
