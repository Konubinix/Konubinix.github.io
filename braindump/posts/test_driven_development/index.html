<!DOCTYPE html>
<html><title>test-driven development</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="bLmaFyyXugiCqSup-eIIIx0B4CngtdF_svyMMKQbS5E" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, minimum-scale=0.5, user-scalable=yes">
<meta name="apple-mobile-web-app-capable" content="yes" />
<script src="https://hypothes.is/embed.js" async></script>


<link rel="stylesheet" href="/braindump/css/main.min.56b43bcbc759a196f9dd525bee62bdec45a29ba95902bbab74a4f7ad2ea3e8cb.css"/>

<link rel="stylesheet" href="/braindump/css/links.min.4bf1990b213fb76d2a66153dc6ef9a57d49f536c6baf6e7f19a7948470a38141.css"/>

<link rel="stylesheet" href="/braindump/css/konubinix.min.cf2d0f36945178c647979ee68f1830892e06aa3d481d8913728b5c7462b97f6e.css"/>

<link rel="stylesheet" href="/ipfs/QmQFVQS89fv1XUNFcjwCKDePzckuT9kpuAVNYUwNdEfYcv/css/all.css"/>
<link rel="shortcut icon" href="/ipfs/QmVFwYV7YRZLKU3ybN1hW4jqfyZGPLKJwd8toN2wHz5UAD?a.png" type="image/x-icon" />

<body><header>
  <div>
	<a href="/braindump//"><h5 class="site-title">Konubinix&#39; opinionated web of thoughts</h5></a>
  </div>
  <span>
	<a href="/blog/"><i class="icon fas fa-blog"></i></a>
	<a href="/braindump/posts/"><i class="icon fas fa-brain"></i></a>
    <a href="mailto:konubinixweb@gmail.com"><i class="icon fas fa-envelope-square"></i></a>
    <a href="https://github.com/konubinix"><i class="icon fab fa-github-square"></i></a>
    <a href="https://linkedin.com/in/samuel-loury-61259040"><i class="icon fab fa-linkedin"></i></a>
	<a href="/braindump/graph.html"><i class="icon fas fa-project-diagram"></i></a>
	<a href="/braindump/index.xml"><i class="icon fas fa-rss-square"></i></a>
	<a href="/braindump/tags/"><i class="icon fa fa-tag"></i></a>
	<a href="/braindump/braindump_search"><i class="icon fa fa-search"></i></a>
  </span>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
		<p class="lead">
        <h1>Test-Driven Development</h1>
		<span class="badge badge-pill badge-warning"><a href="/braindump/tags/fleeting/">Fleeting</a></span></p>
        <ul>
<li>External reference: <div class="iframe-container ratio169"><iframe src="https://www.youtube-nocookie.com/embed/xUi2951ufaw" allowfullscreen title="YouTube Video"></iframe></div></li>
<li>External reference: <div class="iframe-container ratio169"><iframe src="https://www.youtube-nocookie.com/embed/ln4WnxX-wrw" allowfullscreen title="YouTube Video"></iframe></div></li>
<li>External reference: <div class="iframe-container ratio169"><iframe src="https://www.youtube-nocookie.com/embed/aebv1z80vSM" allowfullscreen title="YouTube Video"></iframe></div></li>
<li>External reference: <div class="iframe-container ratio169"><iframe src="https://www.youtube-nocookie.com/embed/0wiIckffWFw" allowfullscreen title="YouTube Video"></iframe></div></li>
<li>External reference: <audio controls><source src="https://cdn.changelog.com/uploads/gotime/185/go-time-185.mp3" type="audio/mpeg">Your browser does not support the audio element.</audio></li>
<li>External reference: <div class="iframe-container ratio169"><iframe src="https://www.youtube-nocookie.com/embed/B1j6k2j2eJg" allowfullscreen title="YouTube Video"></iframe></div></li>
<li>External reference: <a href="https://doc.rust-lang.org/book/ch12-04-testing-the-librarys-functionality.html">https://doc.rust-lang.org/book/ch12-04-testing-the-librarys-functionality.html</a></li>
<li>External reference: <a href="https://en.wikipedia.org/wiki/Test-driven_development#Test-driven_development_cycle">https://en.wikipedia.org/wiki/Test-driven_development#Test-driven_development_cycle</a></li>
</ul>
<ul>
<li>see,
<ul>
<li><a href="/braindump/posts/how_to_test/">how to test?</a>,</li>
<li><a href="/braindump/posts/definition_of_done_driven_development/">shared outcome driven development</a>,</li>
<li><a href="/braindump/posts/testing_code/">testing code</a>,</li>
<li><a href="/braindump/posts/is_tdd_possible_in_companies/">is tdd possible in companies?</a>,</li>
</ul>
</li>
</ul>
<p><a href="/braindump/posts/test_first_programming/">test first programming</a>, with the development not doing anything more that make
the tests pass =&gt; The tests actually drive the development.</p>
<h2 id="1fcc85d6-de3d-419e-9251-088b4309caa6">in a nutshell</h2>
<p>To the best of my understanding it is about:</p>
<ol>
<li>writing the <strong>simplest</strong> <strong>code</strong>,</li>
<li>that <strong>fulfils</strong> the <strong>promises</strong>,</li>
<li><strong>expressed</strong> by the <strong>tests</strong>,</li>
<li>while being compatible with <a href="/braindump/posts/our_working_memory_is_quite_limited/">our limited working memory</a>,</li>
<li>and trying to be as <a href="/braindump/posts/intellectually_honest/">intellectually honest</a> as possible,</li>
</ol>
<p>Here, <strong>simplest</strong> means using the <a href="/braindump/posts/principe_de_parcimonie/">Occam&rsquo;s razor</a>: all other things being equal,
provide the simplest code, the one that will bring fewest potential bugs with
it. The simplest code is no code at all, right? But chances are that we have
made some promises about our program and that no code at all won&rsquo;t fulfil
them. Therefore, we need something to tell we, every time we look at it, whether
our program fulfil our <a href="/braindump/posts/verified_proved_promised_contracts_based_programming/">promise</a>s, and this for each promise we have made.</p>
<p>But, focusing on ALL our promises at once is likely to overflow our <a href="/braindump/posts/our_working_memory_is_quite_limited/">limited
working memory</a>, hence we most likely want to focus on one thing at a time.</p>
<p>Actually, even making sure the code fulfils the promises and making the code
&ldquo;elegant&rdquo; is likely to be too much <a href="/braindump/posts/charge_mentale/">cognitive load</a>. So let&rsquo;s even split this
in two.</p>
<p>Also, we could start by writing some code and then try to express the promise
once we have a clearer mind. But this would make us <a href="/braindump/posts/priming/">primed</a> into thinking the
promise in a way that satisfies the code. We definitely don&rsquo;t want that and want
to prime our mind on the problem and afterwards find a solution to that
problem. Yet, we won&rsquo;t have a clear view of the problem until both the problem
and the solution will be written, so this work or writing the promise and then
writing some code is actually a loop of going back and forth between the two.</p>
<p>Eventually, we get to this procedure:</p>
<ol>
<li>focus on ONE promise,</li>
<li>write something that tells us whether the promise is fulfilled or not,
<ol>
<li>starting doing this before writing some code is important to avoid being <a href="/braindump/posts/priming/">primed</a>,</li>
</ol>
</li>
<li>write some code, until the stuff created at step 2 tells this is ok,
<ol>
<li>actually, there is a loop between 2 and 3, because when doing the code, it
will become clearer that the stuff at step 2 is not that precise and it should be improved,</li>
<li>we focus here on making the code work, nothing else, so that we keep a <a href="/braindump/posts/mind_like_water/">clear mind</a>.</li>
</ol>
</li>
<li>take a step back, look at the code, and make it more elegant.</li>
</ol>
<h2 id="a92903f5-e44e-49a0-9f67-a333192aa2d0">some older notes</h2>
<p>This method is supposed to let the design emerge from the action of thinking the
tests. In contrast, <a href="/braindump/posts/behavior_driven_development/">BDD</a> makes the specification emerge from the tests.</p>
<p>This method stresses the fact that the implementation should fulfil the tests
and only the tests. Hence the name &ldquo;driven&rdquo;: the development is only driven by
the test, nothing else. This avoids over engineering, produce an helper for
refactoring and make the system writer think about what the system is about.</p>
<p>It is important to separate writing the test and writing the code so that we
<strong><a href="#d7e09c97-dc7c-454a-b4bd-bf2dff337772">separate the time we make the code work and the time we make the code more
elegant</a></strong>.</p>
<p>This video give several hints about how to use it <div class="iframe-container ratio169"><iframe src="https://www.youtube-nocookie.com/embed/0wiIckffWFw" allowfullscreen title="YouTube Video"></iframe></div></p>
<p><a href="https://youtu.be/aebv1z80vSM">https://youtu.be/aebv1z80vSM</a> says that we have <a href="/braindump/posts/biais_cognitif/">biases</a> when we wrote
the code prior to writing the test in favor of testing what we know of the
code. Writing the test prior to the code avoids such bias.</p>
<p>This method is all about making the design emerge from the code. Writing the
tests up front is only a side effect due to the fact we would be biased
otherwise. Thus, defining this method by « simply write the test before the
code » is defining on a single side effect of the method and missing the whole
point.</p>
<p>It looks like <a href="/braindump/posts/eating_your_own_dog_food/">dogfooding</a>, in the sense it helps the developer think like
the <a href="/braindump/posts/user_experience/">end user</a>, when thinking about the test without making hypothesis about how
the code works.</p>
<p>The tests should mostly be about the exposed API.</p>
<p>Writing tests in TDD is like explaining the application to someone else. Given
this situation, When I do this or that, It should do this and that. By looking
at the tests, one should be able to understand what the program is meant to do.
This provides a refactoring barrier, in which we can feel confident changing
the implementation and have the test tell us when we broke the story.</p>
<p>Also, writing a test first is a good way to go beyond the blank page
syndrome. We have a failing test that we are thriving to make pass. It&rsquo;s a
good place to start.</p>
<p>Making the test pass becomes the short time outcome. (<a href="/braindump/posts/red_green_development/">red/green development</a>)</p>
<p>Also, with time and the tests suite increasing. Some of the first tests will
become redundant, as we gain in abstraction and write more appropriate
tests. We should then delete the redundant tests.</p>
<blockquote>
<p>Test-driven development (TDD) process. This software development
technique follows these steps:</p>
<p>Write a test that fails and run it to make sure it fails for the reason you
expect.
Write or modify just enough code to make the new test pass.
Refactor the code you just added or changed and make sure the tests
continue to pass.
Repeat from step 1!</p>
<p>&mdash; <a href="https://doc.rust-lang.org/book/ch12-04-testing-the-librarys-functionality.html">https://doc.rust-lang.org/book/ch12-04-testing-the-librarys-functionality.html</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>The following sequence is based on the book Test-Driven Development by Example:[2]</p>
<ol>
<li>
<p>Add a test</p>
<p>The adding of a new feature begins by writing a test that passes iff the
feature&rsquo;s specifications are met. The developer can discover these
specifications by asking about use cases and user stories. A key benefit of
test-driven development is that it makes the developer focus on requirements
before writing code. This is in contrast with the usual practice, where unit
tests are only written after code.</p>
</li>
<li>
<p>Run all tests. The new test should fail for expected reasons</p>
<p>This shows that new code is actually needed for the desired feature. It
validates that the test harness is working correctly. It rules out the
possibility that the new test is flawed and will always pass.</p>
</li>
<li>
<p>Write the simplest code that passes the new test</p>
<p>Inelegant or hard code is acceptable, as long as it passes the test. The code
will be honed anyway in Step 5. No code should be added beyond the tested
functionality.</p>
</li>
<li>
<p>All tests should now pass</p>
<p>If any fail, the new code must be revised until they pass. This ensures the
new code meets the test requirements and does not break existing features.</p>
</li>
<li>
<p>Refactor as needed, using tests after each refactor to ensure that functionality is preserved</p>
<p>Code is refactored for readability and maintainability. In particular,
hard-coded test data should be removed. Running the test suite after each
refactor helps ensure that no existing functionality is broken.</p>
<p>Examples of refactoring:</p>
<ul>
<li>moving code to where it most logically belongs</li>
<li>removing duplicate code</li>
<li>making names self-documenting</li>
<li>splitting methods into smaller pieces</li>
<li>re-arranging inheritance hierarchies</li>
</ul>
</li>
</ol>
<p>Repeat</p>
<p>The cycle above is repeated for each new piece of functionality. Tests should be
small and incremental, and commits made often. That way, if new code fails some
tests, the programmer can simply undo or revert rather than debug
excessively. When using external libraries, it is important not to write tests
that are so small as to effectively test merely the library itself, unless there
is some reason to believe that the library is buggy or not feature-rich enough
to serve all the needs of the software under development.</p>
<p>&mdash; <a href="https://en.wikipedia.org/wiki/Test-driven_development#Test-driven_development_cycle">https://en.wikipedia.org/wiki/Test-driven_development#Test-driven_development_cycle</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<table>
  <thead>
      <tr>
          <th>time</th>
          <th>text</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=136.319s">https://youtu.be/B1j6k2j2eJg&amp;t=136.319s</a></td>
          <td>fifth step is refactoring and improving</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=139.04s">https://youtu.be/B1j6k2j2eJg&amp;t=139.04s</a></td>
          <td>the code</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=140s">https://youtu.be/B1j6k2j2eJg&amp;t=140s</a></td>
          <td>while you have the test harness running</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=142.319s">https://youtu.be/B1j6k2j2eJg&amp;t=142.319s</a></td>
          <td>so you make sure that you always have</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=144.319s">https://youtu.be/B1j6k2j2eJg&amp;t=144.319s</a></td>
          <td>passing tests while you&rsquo;re doing that so</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=146.239s">https://youtu.be/B1j6k2j2eJg&amp;t=146.239s</a></td>
          <td>this is the main process of test driven</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=148.64s">https://youtu.be/B1j6k2j2eJg&amp;t=148.64s</a></td>
          <td>development and you can repeat this</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=150.72s">https://youtu.be/B1j6k2j2eJg&amp;t=150.72s</a></td>
          <td>cycle of writing new tests making sure</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=152.72s">https://youtu.be/B1j6k2j2eJg&amp;t=152.72s</a></td>
          <td>they fail writing the code making sure</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=154.72s">https://youtu.be/B1j6k2j2eJg&amp;t=154.72s</a></td>
          <td>test pass and then refactoring over and</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=156.959s">https://youtu.be/B1j6k2j2eJg&amp;t=156.959s</a></td>
          <td>over again and if you&rsquo;re working in an</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=158.56s">https://youtu.be/B1j6k2j2eJg&amp;t=158.56s</a></td>
          <td>agile setting you should do this in</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=160.16s">https://youtu.be/B1j6k2j2eJg&amp;t=160.16s</a></td>
          <td>small incremental steps and make commits</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=162.72s">https://youtu.be/B1j6k2j2eJg&amp;t=162.72s</a></td>
          <td>very often the process of writing</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=165.28s">https://youtu.be/B1j6k2j2eJg&amp;t=165.28s</a></td>
          <td>failing tests first</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=167.04s">https://youtu.be/B1j6k2j2eJg&amp;t=167.04s</a></td>
          <td>then write the code that makes those</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=169.2s">https://youtu.be/B1j6k2j2eJg&amp;t=169.2s</a></td>
          <td>tests paths and then refactoring the</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=171.76s">https://youtu.be/B1j6k2j2eJg&amp;t=171.76s</a></td>
          <td>code to improve it is also called red</td>
      </tr>
      <tr>
          <td><a href="https://youtu.be/B1j6k2j2eJg&amp;t=174s">https://youtu.be/B1j6k2j2eJg&amp;t=174s</a></td>
          <td>green refactor</td>
      </tr>
  </tbody>
</table>
<p>from &ndash; <div class="iframe-container ratio169"><iframe src="https://www.youtube-nocookie.com/embed/B1j6k2j2eJg" allowfullscreen title="YouTube Video"></iframe></div></p>
</blockquote>
<h2 id="d7e09c97-dc7c-454a-b4bd-bf2dff337772">separate the time we make the code work and the time we make the code more elegant</h2>
<ul>
<li>
<p>External reference: <audio controls><source src="https://cdn.changelog.com/uploads/gotime/185/go-time-185.mp3" type="audio/mpeg">Your browser does not support the audio element.</audio></p>
<p>Because both require some amount of <a href="/braindump/posts/charge_mentale/">cognitive load</a>, I suggest letting our
brain relax for a few hours in between making the code word and making it more
elegant.</p>
<p>Also, using <a href="/braindump/posts/eating_your_own_dog_food/">dogfooding</a> helps, because we can make first something that
&ldquo;works&rdquo;, then try it ourselves and feel how inelegant it is. This gives us the
<a href="/braindump/posts/incentive/">incentive</a> to make it more elegant.</p>
<p>It&rsquo;s strange to realize how simple the code can be when we make it elegant and
how we could miss that simplicity when we were focused on making it
work. Somehow, we don&rsquo;t have the brain power to do both at the same time.</p>
</li>
</ul>
<h2 id="c68906a4-7642-477d-8824-bb0c103a4091">virtuous circle</h2>
<p>In the long run, we tend to apply this mantra for the code but also for the
test. There is a kind of virtuous circle where a stable test battery supports
making the code elegant and a stable code supports making the test battery
more elegant.</p>
<h2 id="bcff49ec-4e30-45db-968e-ab3007b93297">tragedy of TDD</h2>
<p>When we have a lot of transparency in the team. As soon as the test passes,
the person in charge of the <a href="/braindump/posts/scrum_team/#only-one-product-owner">product owner</a> role starts thinking that the
task is done and the team is pushed strongly towards the next piece of code.</p>
<p>Therefore, the team pretending to apply TDD and still always applying
exceptions falls into the <a href="/braindump/posts/avoir_l_intuition_de_faire_les_choses_bien_vs_etre_convaincu_de_faire_les_choses_bien/">feeling good bias</a>.</p>
<!--more-->
<h2 id="notes-linking-here">Notes linking here</h2>
<ul>
<li><a href="/braindump/posts/utiliser_un_marteau_piqueur_pour_enfoncer_un_clou/">&ldquo;utiliser un marteau piqueur pour enfoncer un clou&rdquo;</a></li>
<li><a href="/braindump/posts/clk/#8f48ed88-4d05-4f26-813a-00447c3b0050">a TDD way of thinking</a></li>
<li><a href="/braindump/posts/behavior_driven_development/">behavior-driven development</a></li>
<li><a href="/braindump/posts/brain_adapted_development/">Brain Adapted Development</a></li>
<li><a href="/braindump/posts/braindump_et_tdd/">braindump et tdd</a></li>
<li><a href="/braindump/posts/builder_user_or_architect/">builder, user or architect</a></li>
<li><a href="/braindump/posts/definition_of_done_driven_development/">definition of done driven development</a></li>
<li><a href="/braindump/posts/exploration_and_then_exploitation_development/">exploration and then exploitation development</a></li>
<li><a href="/braindump/posts/is_tdd_about_learning_the_art_of_writing_wrong_code_right/">is TDD about learning the art of writing &ldquo;wrong code&rdquo; right?</a></li>
<li><a href="/braindump/posts/is_tdd_possible_in_companies/">is tdd possible in companies?</a></li>
<li><a href="/braindump/posts/naive_interpretation_fallacy/">naive interpretation fallacy</a></li>
<li><a href="/braindump/posts/tdd_is_hard_but_worth_it/">tdd is hard but worth it</a></li>
<li><a href="/braindump/posts/tdd_vs_bdd/">tdd vs bdd</a></li>
<li><a href="/braindump/posts/test_first_programming/">test first programming</a></li>
<li><a href="/braindump/posts/verified_proved_promised_contracts_based_programming/">verified/proved promised contracts based programming</a></li>
<li><a href="/braindump/posts/working_code_then_elegant_code/">working code, then elegant code</a></li>
</ul>
<h2 id="permalink"><a href="https://konubinix.eu/braindump/4a3bd23a-9b3a-4de0-abc8-74fbf5caaacf?title=test_driven_development">Permalink</a></h2>
      </div>
	  <aside class="date"><time>Last updated: 09 Oct 2024</time></aside>
	  <aside class="date"><time>Published&nbsp;&nbsp;&nbsp;: 18 May 2021</time></aside>
    </div>
  </div>
</div>

<script src="/braindump/js/URI.js" type="text/javascript"></script>

<script src="/braindump/js/page.js" type="text/javascript"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
