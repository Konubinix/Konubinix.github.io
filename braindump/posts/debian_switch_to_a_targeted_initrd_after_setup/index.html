<!DOCTYPE html>
<html><title>debian: switch to a targeted initrd after setup?</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="bLmaFyyXugiCqSup-eIIIx0B4CngtdF_svyMMKQbS5E" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, minimum-scale=0.5, user-scalable=yes">
<meta name="apple-mobile-web-app-capable" content="yes" />
<script src="https://hypothes.is/embed.js" async></script>


<link rel="stylesheet" href="/braindump/css/main.min.56b43bcbc759a196f9dd525bee62bdec45a29ba95902bbab74a4f7ad2ea3e8cb.css"/>

<link rel="stylesheet" href="/braindump/css/links.min.4bf1990b213fb76d2a66153dc6ef9a57d49f536c6baf6e7f19a7948470a38141.css"/>

<link rel="stylesheet" href="/braindump/css/konubinix.min.cf2d0f36945178c647979ee68f1830892e06aa3d481d8913728b5c7462b97f6e.css"/>

<link rel="stylesheet" href="/ipfs/QmQFVQS89fv1XUNFcjwCKDePzckuT9kpuAVNYUwNdEfYcv/css/all.css"/>
<link rel="shortcut icon" href="/ipfs/QmVFwYV7YRZLKU3ybN1hW4jqfyZGPLKJwd8toN2wHz5UAD?a.png" type="image/x-icon" />

<body><header>
  <div>
	<a href="/braindump//"><h5 class="site-title">Konubinix&#39; opinionated web of thoughts</h5></a>
  </div>
  <span>
	<a href="/blog/"><i class="icon fas fa-blog"></i></a>
	<a href="/braindump/posts/"><i class="icon fas fa-brain"></i></a>
    <a href="mailto:konubinixweb@gmail.com"><i class="icon fas fa-envelope-square"></i></a>
    <a href="https://github.com/konubinix"><i class="icon fab fa-github-square"></i></a>
    <a href="https://linkedin.com/in/samuel-loury-61259040"><i class="icon fab fa-linkedin"></i></a>
	<a href="/braindump/graph.html"><i class="icon fas fa-project-diagram"></i></a>
	<a href="/braindump/index.xml"><i class="icon fas fa-rss-square"></i></a>
	<a href="/braindump/tags/"><i class="icon fa fa-tag"></i></a>
	<a href="/braindump/braindump_search"><i class="icon fa fa-search"></i></a>
  </span>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
		<p class="lead">
        <h1>Debian: Switch to a Targeted Initrd After Setup?</h1>
		<span class="badge badge-pill badge-warning"><a href="/braindump/tags/fleeting/">Fleeting</a></span></p>
        <ul>
<li>External reference: <a href="https://askubuntu.com/questions/16007/switch-to-a-targeted-initrd-after-setup">https://askubuntu.com/questions/16007/switch-to-a-targeted-initrd-after-setup</a></li>
</ul>
<p>Switch to a targeted initrd after setup?</p>
<blockquote>
<p>Edit /etc/initramfs-tools/initramfs.conf and change</p>
<p>MODULES=most</p>
<p>to</p>
<p>MODULES=dep</p>
<p>then run</p>
<p>update-initramfs -u</p>
<p>&mdash; <a href="https://askubuntu.com/questions/16007/switch-to-a-targeted-initrd-after-setup">https://askubuntu.com/questions/16007/switch-to-a-targeted-initrd-after-setup</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>&ldquo;debian targeted drivers to generic after setup</p>
<p>It seems like you’re trying to switch from a targeted initrd to a generic one in Debian. Here’s a step-by-step guide on how to do this:</p>
<ul>
<li>Understand the difference between targeted and generic initrd: Both the
generic and targeted initrd contain the core drivers built-in. However,
drivers for additional hardware are available from modules which are only
loaded if required. The targeted initrd is more lean but may not detect the
necessity for certain hardware drivers, such as USB keyboard support for LUKS
password on boot.</li>
<li>Check the current initrd: You can check the current initrd by running ls
/boot. This will list all the initrd images. The naming convention is usually
initrd.img-&lt;kernel version&gt;.</li>
<li>Update the initramfs: To switch to a generic initrd, you need to update the
initramfs. You can do this by running sudo update-initramfs -u -k all. This
will update the initramfs for all kernel versions.</li>
<li>Reconfigure initramfs: If you’re still having issues, you might need to
reconfigure initramfs. You can do this by running sudo dpkg-reconfigure
linux-image-&lt;kernel version&gt;. This will allow you to choose between a
‘generic’ and ‘targeted’ kernel.</li>
<li>Check for overruling hooks: Note that hooks in /etc/initramfs-tools/conf.d
overrule the setting from /etc/initramfs-tools/initramfs.conf. So, if you have
any hooks in /etc/initramfs-tools/conf.d, they might be overruling your
settings.</li>
<li>Add necessary modules: If you like your lean targeted initrd but want USB
keyboards to work in initrd, you can include modules hid_generic and usbhid in
/etc/initramfs-tools/modules.</li>
<li>Remember to replace &lt;kernel version&gt; with your actual kernel version. If
you’re unsure about your kernel version, you can check it by running uname
-r.&rdquo;</li>
</ul>
<p>&mdash; <a href="https://search.brave.com/search?q=debian+targeted+drivers+to+generic+after+setup&amp;source=web#:~:text=Code%20LLM-,debian%20targeted%20drivers%20to%20generic%20after%20setup,kernel%20version%2C%20you%20can%20check%20it%20by%20running%20uname%20%2Dr.,-Contexte">https://search.brave.com/search?q=debian+targeted+drivers+to+generic+after+setup&amp;source=web#:~:text=Code%20LLM-,debian%20targeted%20drivers%20to%20generic%20after%20setup,kernel%20version%2C%20you%20can%20check%20it%20by%20running%20uname%20%2Dr.,-Contexte</a></p>
</blockquote>
<h2 id="permalink"><a href="https://konubinix.eu/braindump/d4fa7dac-8515-401e-af20-a2a1ce8b78a8?title=debian_switch_to_a_targeted_initrd_after_setup">Permalink</a></h2>
      </div>
	  <aside class="date"><time>Last updated: 08 Feb 2024</time></aside>
	  <aside class="date"><time>Published&nbsp;&nbsp;&nbsp;: 06 Feb 2024</time></aside>
    </div>
  </div>
</div>

<script src="/braindump/js/URI.js" type="text/javascript"></script>

<script src="/braindump/js/page.js" type="text/javascript"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
