<!DOCTYPE html>
<html><title>JSON Web Signature</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="bLmaFyyXugiCqSup-eIIIx0B4CngtdF_svyMMKQbS5E" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, minimum-scale=0.5, user-scalable=yes">
<meta name="apple-mobile-web-app-capable" content="yes" />
<script src="https://hypothes.is/embed.js" async></script>


<link rel="stylesheet" href="/braindump/css/main.min.56b43bcbc759a196f9dd525bee62bdec45a29ba95902bbab74a4f7ad2ea3e8cb.css"/>

<link rel="stylesheet" href="/braindump/css/links.min.4bf1990b213fb76d2a66153dc6ef9a57d49f536c6baf6e7f19a7948470a38141.css"/>

<link rel="stylesheet" href="/braindump/css/konubinix.min.cf2d0f36945178c647979ee68f1830892e06aa3d481d8913728b5c7462b97f6e.css"/>

<link rel="stylesheet" href="/ipfs/QmQFVQS89fv1XUNFcjwCKDePzckuT9kpuAVNYUwNdEfYcv/css/all.css"/>
<link rel="shortcut icon" href="/ipfs/QmVFwYV7YRZLKU3ybN1hW4jqfyZGPLKJwd8toN2wHz5UAD?a.png" type="image/x-icon" />

<body><header>
  <div>
	<a href="/braindump//"><h5 class="site-title">Konubinix&#39; opinionated web of thoughts</h5></a>
  </div>
  <span>
	<a href="/blog/"><i class="icon fas fa-blog"></i></a>
	<a href="/braindump/posts/"><i class="icon fas fa-brain"></i></a>
    <a href="mailto:konubinixweb@gmail.com"><i class="icon fas fa-envelope-square"></i></a>
    <a href="https://github.com/konubinix"><i class="icon fab fa-github-square"></i></a>
    <a href="https://linkedin.com/in/samuel-loury-61259040"><i class="icon fab fa-linkedin"></i></a>
	<a href="/braindump/graph.html"><i class="icon fas fa-project-diagram"></i></a>
	<a href="/braindump/index.xml"><i class="icon fas fa-rss-square"></i></a>
	<a href="/braindump/tags/"><i class="icon fa fa-tag"></i></a>
	<a href="/braindump/braindump_search"><i class="icon fa fa-search"></i></a>
  </span>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
		<p class="lead">
        <h1>JSON Web Signature</h1>
		<span class="badge badge-pill badge-warning"><a href="/braindump/tags/fleeting/">Fleeting</a></span></p>
        <ul>
<li>External reference: <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></li>
<li>see,
<ul>
<li><a href="/braindump/posts/json_web_tokens/">JSON web tokens</a>,</li>
</ul>
</li>
</ul>
<blockquote>
<dl>
<dt>JSON Web Signature (JWS)</dt>
<dd>A data structure representing a digitally signed or <a href="/braindump/posts/message_authentication_code/">MAC</a>ed message.</dd>
</dl>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<dl>
<dt>JWS JSON Serialization</dt>
<dd>A representation of the JWS as a JSON object.
Unlike the JWS Compact Serialization, the JWS JSON Serialization enables
multiple digital signatures and/or MACs to be applied to the same content.
This representation is neither optimized for compactness nor URL-safe.</dd>
</dl>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>Unsecured JWS</p>
<p>A JWS that provides no integrity protection.  Unsecured JWSs use the &ldquo;alg&rdquo; value
&ldquo;none&rdquo;.</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>A JWS represents these logical values (each of which is defined in Section 2):</p>
<ul>
<li><a href="#ab3621ce-5e06-4d71-95fa-304e94ceb530">JOSE Header</a>,</li>
<li><a href="#19c2ae2d-92fc-4684-ae6d-343b396c8e98">JWS Payload</a>,</li>
<li><a href="#e3580c6b-a760-497e-bd2d-8ede0c74e200">JWS Signature</a>,</li>
</ul>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515#section-3">https://datatracker.ietf.org/doc/html/rfc7515#section-3</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>two serializations for JWSs:</p>
<ul>
<li>a compact, URL-safe serialization called the <a href="#f06e78f0-b9af-4f2c-963f-3298184eef45">JWS Compact Serialization</a></li>
<li>and a JSON serialization called the JWS JSON Serialization.</li>
</ul>
</blockquote>
<!--quoteend-->
<blockquote>
<p>The <a href="#f06e78f0-b9af-4f2c-963f-3298184eef45">JWS Compact Serialization</a> is a compact, URL-safe representation intended for
space constrained environments such as HTTP Authorization headers and URI query
parameters</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<h3 id="8fbadb1c-901b-494a-bb1d-b63d259741dd"><a href="/braindump/posts/json_web_signature/">JWS</a> does not use exactly <a href="/braindump/posts/base64/">base64</a></h3>
<blockquote>
<p>In both serializations, the <a href="#ab3621ce-5e06-4d71-95fa-304e94ceb530">JWS Protected Header</a>, <a href="#19c2ae2d-92fc-4684-ae6d-343b396c8e98">JWS Payload</a>, and <a href="#e3580c6b-a760-497e-bd2d-8ede0c74e200">JWS Signature</a>
are <a href="/braindump/posts/base64/">base64url</a> encoded, since JSON lacks a way to directly represent arbitrary
octet sequences.</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515#section-3">https://datatracker.ietf.org/doc/html/rfc7515#section-3</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>the number of &lsquo;=&rsquo; padding characters
that needs to be added to the end of a base64url encoded string
without padding to turn it into one with padding is a deterministic
function of the length of the encoded string</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>s = s.Replace(&rsquo;+&rsquo;, &lsquo;-&rsquo;); <em>/ 62nd char of encoding
s = s.Replace(&rsquo;</em>&rsquo;, &lsquo;_&rsquo;); // 63rd char of encoding</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<h3 id="e6432bc2-3264-47e3-aa23-95b9afc198f6">how to decode JWS pseudo base64?</h3>
<p>As stated in the appendix C, they don&rsquo;t provide base64 padding, hence we
artificially add an extra padding of &ldquo;<code>=</code>&rdquo; to make python implementation accept
those base64 encoded content. Also, they replace the + and / character of the
base64 alphabet respectively with - and _. This makes sense, as this content will eventually
be put into a URL, but one could ask why not using a more URL friendly encoding,
like base58 or base32.</p>
<p>Therefore the python code to read such data should be like:</p>
<p><a id="code-snippet--fc84469f-bc34-49c0-b70b-ba0d63d94597"></a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">import</span> <span style="color:#555">base64</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">base64decode</span>(content):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> base64<span style="color:#000;font-weight:bold">.</span>b64decode(content<span style="color:#000;font-weight:bold">.</span>replace(<span style="color:#d14">&#34;-&#34;</span>, <span style="color:#d14">&#34;+&#34;</span>)<span style="color:#000;font-weight:bold">.</span>replace(<span style="color:#d14">&#34;_&#34;</span>, <span style="color:#d14">&#34;/&#34;</span>) <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34;===&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">base64encode</span>(content):
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> base64<span style="color:#000;font-weight:bold">.</span>b64encode(content)<span style="color:#000;font-weight:bold">.</span>replace(<span style="color:#d14">b</span><span style="color:#d14">&#34;+&#34;</span>, <span style="color:#d14">b</span><span style="color:#d14">&#34;-&#34;</span>)<span style="color:#000;font-weight:bold">.</span>replace(<span style="color:#d14">b</span><span style="color:#d14">&#34;/&#34;</span>, <span style="color:#d14">b</span><span style="color:#d14">&#34;_&#34;</span>)<span style="color:#000;font-weight:bold">.</span>rstrip(<span style="color:#d14">b</span><span style="color:#d14">&#34;=&#34;</span>)
</span></span></code></pre></div><h2 id="ab3621ce-5e06-4d71-95fa-304e94ceb530">JOSE header</h2>
<p><span class="org-target" id="org-target--dd9cd5bd-31bd-4e47-bc2b-dd5a27a8f0fc"></span> <a href="#ab3621ce-5e06-4d71-95fa-304e94ceb530">JOSE header</a> is defined in <a href="/braindump/posts/json_web_signature/">JWS</a> (in <a href="https://datatracker.ietf.org/doc/html/rfc7515#section-4">here</a>)
and <a href="/braindump/posts/json_web_encryption/">JWE</a> (in <a href="https://datatracker.ietf.org/doc/html/rfc7516#section-4">here</a>). It is a standard of encoding in json the information about
how to use the JWS or JWE payload. It contains the type of the payload and the
signature/encryption algorithms and hashes to use.</p>
<blockquote>
<dl>
<dt>JOSE Header</dt>
<dd>JSON object containing the parameters describing the cryptographic operations
and parameters employed.  The JOSE Header is comprised of a set of Header
Parameters.</dd>
</dl>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<h3 id="9c9f0154-6832-404b-91b4-6576cd92dc66">typ</h3>
<blockquote>
<ul>
<li>
<p>External reference: <a href="https://datatracker.ietf.org/doc/html/rfc7515#section-4.1.9">https://datatracker.ietf.org/doc/html/rfc7515#section-4.1.9</a>
The &ldquo;typ&rdquo; (type) Header Parameter is used by JWS applications to
declare the media type [<a href="https://www.iana.org/assignments/media-types/media-types.xhtml">IANA.MediaTypes</a>] of this complete JWS.  This
is intended for use by the application when more than one kind of
object could be present in an application data structure that can
contain a JWS; the application can use this value to disambiguate
among the different kinds of objects that might be present.  It will
typically not be used by applications when the kind of object is
already known.</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515#section-4.1.9">https://datatracker.ietf.org/doc/html/rfc7515#section-4.1.9</a></p>
</li>
</ul>
</blockquote>
<h2 id="19c2ae2d-92fc-4684-ae6d-343b396c8e98">jws payload</h2>
<blockquote>
<p>JWS Payload
The sequence of octets to be secured &ndash; a.k.a., the message.  The
payload can contain an arbitrary sequence of octets.</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<h2 id="e3580c6b-a760-497e-bd2d-8ede0c74e200">jws signature</h2>
<blockquote>
<p>JWS Signature
Digital signature or MAC over the JWS Protected Header and the JWS
Payload</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<h2 id="f06e78f0-b9af-4f2c-963f-3298184eef45">JWS Compact Serialization</h2>
<blockquote>
<dl>
<dt>JWS Compact Serialization</dt>
<dd>A representation of the JWS as a compact, URL-safe string</dd>
</dl>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515">https://datatracker.ietf.org/doc/html/rfc7515</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>In the JWS Compact Serialization, no JWS Unprotected Header is used</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515#section-3">https://datatracker.ietf.org/doc/html/rfc7515#section-3</a></p>
</blockquote>
<!--quoteend-->
<blockquote>
<p>In the JWS Compact Serialization, a JWS is represented as the
concatenation:</p>
<p>BASE64URL(UTF8(JWS Protected Header)) || &lsquo;.&rsquo; ||
BASE64URL(JWS Payload) || &lsquo;.&rsquo; ||
BASE64URL(JWS Signature)</p>
<p>&mdash; <a href="https://datatracker.ietf.org/doc/html/rfc7515#section-3">https://datatracker.ietf.org/doc/html/rfc7515#section-3</a></p>
</blockquote>
<!--more-->
<h2 id="notes-linking-here">Notes linking here</h2>
<ul>
<li><a href="https://konubinix.eu/blog/posts/how_do_i_create_an_oauth_2_0_oidc_resource_server/?title=how_do_i_create_an_oauth_2_0_oidc_resource_server#">how do I create an OAuth 2.0/OIDC resource server?</a> (blog)</li>
<li><a href="/braindump/posts/json_web_tokens/">JSON web tokens</a></li>
<li><a href="/braindump/posts/trying_authenticating_to_keycloak_using_google_as_identity_provider/#5f45750e-4fe9-4b4c-a141-e8a2ccd2b2af">keycloak provide many user related information in the access token by default.</a></li>
<li><a href="https://konubinix.eu/blog/posts/make_sense_of_keycloak_openid_connect_oauth_2_0_jwt_jws/?title=make_sense_of_keycloak_openid_connect_oauth_2_0_jwt_jws#">make sense of keycloak, openid connect, oauth 2.0, jwt, jws</a> (blog)</li>
<li><a href="/braindump/posts/oauth_2_0/">OAuth 2.0</a></li>
<li><a href="/braindump/posts/playing_with_auth0_for_the_first_time/">playing with auth0 for the first time</a></li>
<li><a href="/braindump/posts/securing_applications_and_services_guide/">Securing Applications and Services Guide</a></li>
<li><a href="/braindump/posts/oauth_2_0/#eec4cf73-015a-4574-beb5-f6c95445dfa7">self-encoded access tokens</a></li>
<li><a href="https://konubinix.eu/blog/posts/should_i_say_jwt_or_jwt_token_or_jws_token_or/?title=should_i_say_jwt_or_jwt_token_or_jws_token_or#">should I say JWT or JWT token, or JWS token or&hellip;?</a> (blog)</li>
<li><a href="https://konubinix.eu/blog/posts/make_sense_of_keycloak_openid_connect_oauth_2_0_jwt_jws/?title=using_a_bearer_token_encoded_in_jwt_format#using-a-bearer-token-encoded-in-jwt-format">using a bearer token encoded in JWT format?</a> (blog)</li>
<li><a href="/braindump/posts/using_id_token_as_access_token/">using id token as access token?</a></li>
<li><a href="https://konubinix.eu/blog/posts/what_should_i_put_into_those_scopes_and_access_tokens_claims/?title=what_should_i_put_into_those_scopes_and_access_tokens_claims#">what should I put into those scopes and access tokens claims?</a> (blog)</li>
</ul>
<h2 id="permalink"><a href="https://konubinix.eu/braindump/011c1932-3597-4383-922f-0c6bf872d524?title=json_web_signature">Permalink</a></h2>
      </div>
	  <aside class="date"><time>Last updated: 07 Jan 2025</time></aside>
	  <aside class="date"><time>Published&nbsp;&nbsp;&nbsp;: 07 Dec 2021</time></aside>
    </div>
  </div>
</div>

<script src="/braindump/js/URI.js" type="text/javascript"></script>

<script src="/braindump/js/page.js" type="text/javascript"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
