<!DOCTYPE html>
<html><title>deploy helm chart on upload</title>


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="bLmaFyyXugiCqSup-eIIIx0B4CngtdF_svyMMKQbS5E" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, minimum-scale=0.5, user-scalable=yes">
<meta name="apple-mobile-web-app-capable" content="yes" />
<script src="https://hypothes.is/embed.js" async></script>


<link rel="stylesheet" href="/braindump/css/main.min.56b43bcbc759a196f9dd525bee62bdec45a29ba95902bbab74a4f7ad2ea3e8cb.css"/>

<link rel="stylesheet" href="/braindump/css/links.min.4bf1990b213fb76d2a66153dc6ef9a57d49f536c6baf6e7f19a7948470a38141.css"/>

<link rel="stylesheet" href="/braindump/css/konubinix.min.cf2d0f36945178c647979ee68f1830892e06aa3d481d8913728b5c7462b97f6e.css"/>

<link rel="stylesheet" href="/ipfs/QmQFVQS89fv1XUNFcjwCKDePzckuT9kpuAVNYUwNdEfYcv/css/all.css"/>
<link rel="shortcut icon" href="/ipfs/QmVFwYV7YRZLKU3ybN1hW4jqfyZGPLKJwd8toN2wHz5UAD?a.png" type="image/x-icon" />

<body><header>
  <div>
	<a href="/braindump//"><h5 class="site-title">Konubinix&#39; opinionated web of thoughts</h5></a>
  </div>
  <span>
	<a href="/blog/"><i class="icon fas fa-blog"></i></a>
	<a href="/braindump/posts/"><i class="icon fas fa-brain"></i></a>
    <a href="mailto:konubinixweb@gmail.com"><i class="icon fas fa-envelope-square"></i></a>
    <a href="https://github.com/konubinix"><i class="icon fab fa-github-square"></i></a>
    <a href="https://linkedin.com/in/samuel-loury-61259040"><i class="icon fab fa-linkedin"></i></a>
	<a href="/braindump/graph.html"><i class="icon fas fa-project-diagram"></i></a>
	<a href="/braindump/index.xml"><i class="icon fas fa-rss-square"></i></a>
	<a href="/braindump/tags/"><i class="icon fa fa-tag"></i></a>
	<a href="/braindump/braindump_search"><i class="icon fa fa-search"></i></a>
  </span>
</header>

<div class="grid-container">
  <div class="grid">
    <div class="page" data-level="1">
      <div class="content">
		<p class="lead">
        <h1>Deploy Helm Chart on Upload</h1>
		<span class="badge badge-pill badge-warning"><a href="/braindump/tags/fleeting/">Fleeting</a></span></p>
        <p>My <a href="/braindump/posts/gitops/">gitops</a>/<a href="/braindump/posts/devops/">devops</a> strategy is the following.</p>
<ol>
<li>build and upload the docker images in a registry with testing tags</li>
<li>build and upload the helm charts with testing tags</li>
<li>deploy the testing application</li>
<li>test the application</li>
<li>if everything is ok, create deployment tags for both the images and the charts</li>
</ol>
<h2 id="c7854b9d-af5c-4f00-a863-1831c35967eb">automating the deployment</h2>
<p>In the past, I tried using helm install at the step 3. But doing so I needed to
deal with errors (timeout, temporary network outage etc.) and it quickly became
a mess.</p>
<p>It would be great to have out there a tool dedicated to deal with most edge
cases and try hard deploying the application.</p>
<p>At first, I believe <a href="/braindump/posts/argo/#31c9ae7c-cb78-4245-a7bd-a0cc77283bab">argo CD</a> would help doing this, but it actually scans a git
repository to find the helm chart in there. That means that it will try to
deploy the helm chart as soon as the application is pushed. Not only that is
not practical because it won&rsquo;t wait for the images to be built, but often the
development chart won&rsquo;t change (and I still want the testing cluster to
reflect what the result of the HEAD of my dev branch). The CI tooling will
create a dev helm chart based on the git data and this is what I want to
automatically deploy.</p>
<h2 id="permalink"><a href="https://konubinix.eu/braindump/96ade72c-2c94-497d-834c-c546a4a614de?title=deploy_helm_chart_on_upload">Permalink</a></h2>
      </div>
	  <aside class="date"><time>Last updated: 31 Jul 2024</time></aside>
	  <aside class="date"><time>Published&nbsp;&nbsp;&nbsp;: 31 Jul 2024</time></aside>
    </div>
  </div>
</div>

<script src="/braindump/js/URI.js" type="text/javascript"></script>

<script src="/braindump/js/page.js" type="text/javascript"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
